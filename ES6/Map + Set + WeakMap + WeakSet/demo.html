<!DOCTYPE html>
<html>
    <head>
        <title>Map + Set + WeakMap + WeakSet</title>
        <meta charset="UTF-8">
    </head>
    <body>
        <a href="http://www.infoq.com/cn/articles/es6-in-depth-collections?utm_campaign=rightbar_v2&utm_source=infoq&utm_medium=articles_link&utm_content=link_text"
           target="_blank">深入浅出ES6（十）：集合</a> 
        <pre>
"use strict";
// Sets
var family = new Set();
family.add("Sunny").add("Vanessa").add("Erik").add('Daniel').delete('Sunny');
family.forEach(function () {
    console.log('family iterator:', arguments);
});
console.log('family.size: ', family.size, '; family.has("Sunny"): ', family.has("Sunny"));
console.log('family.keys: ', family.keys(), '; family.values: ', family.values(), ';family.entries(): ', family.entries());
family.clear();
console.log('after family.clear():', family);

// Maps
var map = new Map();
map.set('hello', 'family').set('hi', 'son');
map.set(new Set('FAMILY'), 'father and mather, I love you');
map.forEach(function () {
    console.log('map iterator:', arguments);
});
console.log('map.size: ', map.size, '; map.has("hello"): ', map.has('hello'), '; map.get("hello"):', map.get('hello'));
map.delete('hello');
console.log('after delete [hello] key:', map);
console.log('map.keys: ', map.keys(), '; map.values: ', map.values(), ';map.entries(): ', map.entries());
map.clear();
console.log('after map.clear():', map);

// Weak Maps, WeakMaps provides leak-free object-key’d side tables.
var v = new WeakMap(),
        keyObj = new Set('v');
v.set(keyObj, {age: 30}).set({'userName': 'Daniel'}, {weight: 50}); // key must be object.
console.log('v: ', v, '; v.size: ', v.size, '; v.has(keyObj): ', v.has(keyObj), '; v.get(keyObj):', v.get(keyObj));
v.delete(keyObj);
console.log('after delete keyObj:', v);

// Weak Sets
var d = new WeakSet(), age = {age: 30};
d.add(age).add({weight: 50});
console.log('d: ', d, '; d.has(age): ', d.has(age));
d.delete(age);
console.log('after delete age: ', d);
// Because the added object has no other references, it will not be held in the set
        </pre>
        <script>
            "use strict";
            // Sets
            var family = new Set();
            family.add("Sunny").add("Vanessa").add("Erik").add('Daniel').delete('Sunny');
            family.forEach(function () {
                console.log('family iterator:', arguments);
            });
            console.log('family.size: ', family.size, '; family.has("Sunny"): ', family.has("Sunny"));
            console.log('family.keys: ', family.keys(), '; family.values: ', family.values(), ';family.entries(): ', family.entries());
            family.clear();
            console.log('after family.clear():', family);

            // Maps
            var map = new Map();
            map.set('hello', 'family').set('hi', 'son');
            map.set(new Set('FAMILY'), 'father and mather, I love you');
            map.forEach(function () {
                console.log('map iterator:', arguments);
            });
            console.log('map.size: ', map.size, '; map.has("hello"): ', map.has('hello'), '; map.get("hello"):', map.get('hello'));
            map.delete('hello');
            console.log('after delete [hello] key:', map);
            console.log('map.keys: ', map.keys(), '; map.values: ', map.values(), ';map.entries(): ', map.entries());
            map.clear();
            console.log('after map.clear():', map);
            
            // Weak Maps, WeakMaps provides leak-free object-key’d side tables.
            var v = new WeakMap(),
                    keyObj = new Set('v');
            v.set(keyObj, {age: 30}).set({'userName': 'Daniel'}, {weight: 50}); // key must be object.
            console.log('v: ', v, '; v.size: ', v.size, '; v.has(keyObj): ', v.has(keyObj), '; v.get(keyObj):', v.get(keyObj));
            v.delete(keyObj);
            console.log('after delete keyObj:', v);
            
            // Weak Sets
            var d = new WeakSet(), age = {age: 30};
            d.add(age).add({weight: 50});
            console.log('d: ', d, '; d.has(age): ', d.has(age));
            d.delete(age);
            console.log('after delete age: ', d);
            // Because the added object has no other references, it will not be held in the set
        </script>
    </body>
</html>
